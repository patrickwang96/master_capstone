Build: Loading config...
Build: Purging previous build...
Build: Copying files...
Build: Cleaning up...
Build: Building Docker Image...
Sending build context to Docker daemon  503.8kB
Step 1/16 : FROM python:3.8-slim-buster
 ---> c706fbd78639
Step 2/16 : RUN apt update
 ---> Using cache
 ---> 9e15b7761466
Step 3/16 : RUN apt install -y curl build-essential moreutils expect
 ---> Using cache
 ---> 1ff4b362dd75
Step 4/16 : ENV FUNCTION_DIR="/var/task"
 ---> Using cache
 ---> 44ba2f0772c7
Step 5/16 : RUN mkdir -p ${FUNCTION_DIR}
 ---> Using cache
 ---> 75739faa0e1c
Step 6/16 : COPY . ${FUNCTION_DIR}
 ---> bcc8d78d378e
Step 7/16 : RUN pip install boto3 botocore
 ---> Running in 1d06ec4d6903
Collecting boto3
  Downloading boto3-1.24.21-py3-none-any.whl (132 kB)
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 132.5/132.5 KB 12.7 MB/s eta 0:00:00
Collecting botocore
  Downloading botocore-1.27.21-py3-none-any.whl (8.9 MB)
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 8.9/8.9 MB 33.7 MB/s eta 0:00:00
Collecting jmespath<2.0.0,>=0.7.1
  Downloading jmespath-1.0.1-py3-none-any.whl (20 kB)
Collecting s3transfer<0.7.0,>=0.6.0
  Downloading s3transfer-0.6.0-py3-none-any.whl (79 kB)
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 79.6/79.6 KB 13.5 MB/s eta 0:00:00
Collecting python-dateutil<3.0.0,>=2.1
  Downloading python_dateutil-2.8.2-py2.py3-none-any.whl (247 kB)
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 247.7/247.7 KB 25.3 MB/s eta 0:00:00
Collecting urllib3<1.27,>=1.25.4
  Downloading urllib3-1.26.9-py2.py3-none-any.whl (138 kB)
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 139.0/139.0 KB 19.4 MB/s eta 0:00:00
Collecting six>=1.5
  Downloading six-1.16.0-py2.py3-none-any.whl (11 kB)
Installing collected packages: urllib3, six, jmespath, python-dateutil, botocore, s3transfer, boto3
Successfully installed boto3-1.24.21 botocore-1.27.21 jmespath-1.0.1 python-dateutil-2.8.2 s3transfer-0.6.0 six-1.16.0 urllib3-1.26.9
[91mWARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv
[0m[91mWARNING: You are using pip version 22.0.4; however, version 22.1.2 is available.
You should consider upgrading via the '/usr/local/bin/python -m pip install --upgrade pip' command.
[0mRemoving intermediate container 1d06ec4d6903
 ---> a1b6d11d93f3
Step 8/16 : RUN pip install         --target ${FUNCTION_DIR}         awslambdaric
 ---> Running in 278f8a1bd8fa
Collecting awslambdaric
  Downloading awslambdaric-2.0.4-cp38-cp38-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (338 kB)
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 338.4/338.4 KB 21.1 MB/s eta 0:00:00
Collecting simplejson==3.17.2
  Downloading simplejson-3.17.2-cp38-cp38-manylinux2010_x86_64.whl (137 kB)
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 137.9/137.9 KB 18.2 MB/s eta 0:00:00
Installing collected packages: simplejson, awslambdaric
Successfully installed awslambdaric-2.0.4 simplejson-3.17.2
[91mWARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv
[0m[91mWARNING: You are using pip version 22.0.4; however, version 22.1.2 is available.
You should consider upgrading via the '/usr/local/bin/python -m pip install --upgrade pip' command.
[0mRemoving intermediate container 278f8a1bd8fa
 ---> 63c76291f0c1
Step 9/16 : RUN curl -Lo /usr/local/bin/aws-lambda-rie https://github.com/aws/aws-lambda-runtime-interface-emulator/releases/latest/download/aws-lambda-rie
 ---> Running in 19fdd6d8c446
[91m  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Curr[0m[91ment
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0[0m[91m  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0
[0m[91m  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0
[0m[91m100 5432k  100 5432k    0     0  11.0M      0 --:--:-- --:--:-- --:--:-- 11.0M
[0mRemoving intermediate container 19fdd6d8c446
 ---> ee053e9dfacd
Step 10/16 : RUN chmod +x /usr/local/bin/aws-lambda-rie
 ---> Running in c2321677556d
Removing intermediate container c2321677556d
 ---> 68dab76358ca
Step 11/16 : WORKDIR ${FUNCTION_DIR}
 ---> Running in 955d301c94ed
Removing intermediate container 955d301c94ed
 ---> afccd3bfbcf6
Step 12/16 : RUN cd ${FUNCTION_DIR}/llcbench  && make clean && make cache-bench
 ---> Running in e3b2278ecebe
cd mpbench; make clean
make[1]: Entering directory '/var/task/llcbench/mpbench'
rm -f PI* *.o *~ core */*~
make[1]: Leaving directory '/var/task/llcbench/mpbench'
cd blasbench; make clean
make[1]: Entering directory '/var/task/llcbench/blasbench'
rm -f *.o *~ core */*~
make[1]: Leaving directory '/var/task/llcbench/blasbench'
cd cachebench; make clean
make[1]: Entering directory '/var/task/llcbench/cachebench'
rm -f *.o *~ core */*~
make[1]: Leaving directory '/var/task/llcbench/cachebench'
cd doc; make clean
make[1]: Entering directory '/var/task/llcbench/doc'
cd blasbench; make clean
make[2]: Entering directory '/var/task/llcbench/doc/blasbench'
rm -f *.log *.aux *~ *.dvi
make[2]: Leaving directory '/var/task/llcbench/doc/blasbench'
cd cachebench; make clean
make[2]: Entering directory '/var/task/llcbench/doc/cachebench'
rm -f *.log *.aux *~ *.dvi
make[2]: Leaving directory '/var/task/llcbench/doc/cachebench'
cd mpbench; make clean
make[2]: Entering directory '/var/task/llcbench/doc/mpbench'
rm -f *.log *.aux *~ *.dvi
make[2]: Leaving directory '/var/task/llcbench/doc/mpbench'
rm -f *~
make[1]: Leaving directory '/var/task/llcbench/doc'
rm -f *~ */*~
cd cachebench; make 
make[1]: Entering directory '/var/task/llcbench/cachebench'
gcc -c -I.. ../flushall.c
gcc -O -Wall -c -I.. ../timer.c
[91m../timer.c: In function ‘cycles_per_second’:
../timer.c:42:10: warning: unused variable ‘seconds’ [-Wunused-variable]
   double seconds;
          ^~~~~~~
[0mgcc -O -Wall -DUSE_DOUBLE -I.. cachebench.c flushall.o timer.o -lrt -o cachebench
[91mIn file included from cachebench.c:10:
cachebench.c: In function ‘fake_out_optimizations’:
cachebench.c:296:12: warning: suggest parentheses around assignment used as truth value [-Wparentheses]
     assert(fd=open("/dev/null",O_WRONLY));
            ^~
[0m[91mcachebench.c: In function ‘do_memory_copy’:
cachebench.c:712:10: warning: suggest parentheses around assignment used as truth value [-Wparentheses]
   assert(y = (void *)malloc(memsize));
          ^
[0m[91mcachebench.c: In function ‘main’:
cachebench.c:947:10: warning: suggest parentheses around assignment used as truth value [-Wparentheses]
   assert(sizes = (long *)malloc(timeslots*sizeof(long)));
          ^~~~~
[0m[91mcachebench.c:949:10: warning: suggest parentheses around assignment used as truth value [-Wparentheses]
   assert(times = (double *)malloc(timeslots*repeat_count*sizeof(double)));
          ^~~~~
[0m[91mcachebench.c:951:10: warning: suggest parentheses around assignment used as truth value [-Wparentheses]
   assert(bws = (double *)malloc(timeslots*repeat_count*sizeof(double)));
          ^~~
[0m[91mcachebench.c:953:10: warning: suggest parentheses around assignment used as truth value [-Wparentheses]
   assert(percents = (double *)malloc(timeslots*repeat_count*sizeof(double)));
          ^~~~~~~~
[0m[91mcachebench.c:955:10: warning: suggest parentheses around assignment used as truth value [-Wparentheses]
   assert(x = (DATATYPE *)malloc((size_t)memsize));
          ^
[0mmake[1]: Leaving directory '/var/task/llcbench/cachebench'
Removing intermediate container e3b2278ecebe
 ---> d784d12a8841
Step 13/16 : COPY ./entry_script.sh /entry_script.sh
 ---> bb5781ad1040
Step 14/16 : RUN chmod +x /entry_script.sh
 ---> Running in c279792e6d99
Removing intermediate container c279792e6d99
 ---> 3adeeba9ac88
Step 15/16 : ENTRYPOINT [ "/entry_script.sh" ]
 ---> Running in 4b399fab0a33
Removing intermediate container 4b399fab0a33
 ---> 0f071386669d
Step 16/16 : CMD [ "lambda_function.lambda_handler" ]
 ---> Running in 91feda15afbd
Removing intermediate container 91feda15afbd
 ---> 87bb5470815c
Successfully built 87bb5470815c
Successfully tagged cache_bench_test:latest
Loading config...
Creating AWS Registry...
Pushing Docker Image...
Login Succeeded
The push refers to repository [975118141701.dkr.ecr.us-east-2.amazonaws.com/saaf-functions]
f5d0136c9664: Preparing
b3b5ed463446: Preparing
899c3d8dd987: Preparing
ee70829633cc: Preparing
92253a5f0aa7: Preparing
44ffaea85904: Preparing
9ac937bf3ed0: Preparing
885b5795190e: Preparing
c923ffbdf6a7: Preparing
b52f61e16e27: Preparing
691cded49eda: Preparing
ae7b8bf407ae: Preparing
3b7939c395bc: Preparing
04b6df205788: Preparing
832439eadb07: Preparing
0ad3ddf4a4ce: Preparing
885b5795190e: Waiting
c923ffbdf6a7: Waiting
b52f61e16e27: Waiting
691cded49eda: Waiting
ae7b8bf407ae: Waiting
3b7939c395bc: Waiting
04b6df205788: Waiting
832439eadb07: Waiting
0ad3ddf4a4ce: Waiting
44ffaea85904: Waiting
9ac937bf3ed0: Waiting
b3b5ed463446: Pushed
899c3d8dd987: Pushed
ee70829633cc: Pushed
92253a5f0aa7: Pushed
f5d0136c9664: Pushed
c923ffbdf6a7: Layer already exists
b52f61e16e27: Layer already exists
691cded49eda: Layer already exists
ae7b8bf407ae: Layer already exists
3b7939c395bc: Layer already exists
04b6df205788: Layer already exists
44ffaea85904: Pushed
832439eadb07: Layer already exists
0ad3ddf4a4ce: Layer already exists
885b5795190e: Pushed
9ac937bf3ed0: Pushed
cache_bench_test: digest: sha256:af677fd4787cbb6ba672e744c3159e671fbe69ae1b9eb420f14924a1ebe0458a size: 3680
Removing login credentials for https://index.docker.io/v1/
Deploying function...
{
    "FunctionName": "cache_bench_test",
    "FunctionArn": "arn:aws:lambda:us-east-2:975118141701:function:cache_bench_test",
    "Role": "arn:aws:iam::975118141701:role/service-role/cache_bench_test-role-hr29nz9f",
    "CodeSize": 0,
    "Description": "",
    "Timeout": 900,
    "MemorySize": 4496,
    "LastModified": "2022-06-30T22:57:47.000+0000",
    "CodeSha256": "af677fd4787cbb6ba672e744c3159e671fbe69ae1b9eb420f14924a1ebe0458a",
    "Version": "$LATEST",
    "TracingConfig": {
        "Mode": "PassThrough"
    },
    "RevisionId": "078b4c56-fbcb-462e-8b87-5a7683bcf4d6",
    "State": "Active",
    "LastUpdateStatus": "InProgress",
    "LastUpdateStatusReason": "The function is being created.",
    "LastUpdateStatusReasonCode": "Creating",
    "PackageType": "Image",
    "ImageConfigResponse": {},
    "Architectures": [
        "x86_64"
    ],
    "EphemeralStorage": {
        "Size": 512
    }
}
